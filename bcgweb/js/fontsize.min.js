
$(document).ready(function (e) {

    function getCookie(name) {
        var arg = name + "=";
        var alen = arg.length;
        var clen = document.cookie.length;
        var i = 0;
        while (i < clen) {
            var j = i + alen;
            if (document.cookie.substring(i, j) == arg) {
                return getCookieVal(j);
            }
            i = document.cookie.indexOf(" ", i) + 1;
            if (i == 0) break;
        }
        return null;
    }

    function setCookie(name, value, expires, path, domain, secure) {
        var vurl = true;
        if (path != "" && path != undefined) {
            vurl = validUrl(path);
        }
        if (jQuery.type(name) == "string" && vurl) {
            document.cookie =
                name +
                "=" +
                escape(value) +
                (expires ? "; expires=" + expires.toGMTString() : "") +
                (path ? "; path=" + path : "") +
                (domain ? "; domain=" + domain : "") +
                (secure ? "; secure" : "");
        }
    }

    function getCookieVal(offset) {
        var endstr = document.cookie.indexOf(";", offset);
        if (endstr == -1) {
            endstr = document.cookie.length;
        }
        return unescape(document.cookie.substring(offset, endstr));
    }

    if (getCookie("fontSize") != null) {
        var fontSize = getCookie("fontSize");
        jQuery("body").css("font-size", fontSize + "px");
    }
    else {
        var fs = jQuery("body").css("font-size");
        var fontSize = fs;
        jQuery("body").css("font-size", fs);
    }

    $('.fontSizeEvent').on('fontSelected', function () {
        let fontSizeStatus = getCookie("fontSizeStatus");

        if (fontSizeStatus == null) {
            fontSizeStatus = 'normal';

        }
        let label = $('.fontSizeEvent a[data-event-type="' + fontSizeStatus + '"]').attr('data-label');
        let dataSelected = $('.fontSizeEvent a[data-event-type="' + fontSizeStatus + '"]').attr('data-selected-text');


        $('.fontSizeEvent a[data-event-type="' + fontSizeStatus + '"')
            .attr('aria-label', label + ' - ' + dataSelected)
            .attr('title', label + ' - ' + dataSelected)
            .addClass('link-selected');

        $('.fontSizeEvent a[data-event-type="' + fontSizeStatus + '"').parent().siblings().each(function () {
            let label = $(this).find('a').attr('data-label');
            $(this).find('a').attr('aria-label', label).attr('title', label).removeClass('link-selected');
        })
    })

    $('.fontSizeEvent').trigger('fontSelected');

    $('.fontSizeEvent a').on('click', function (event) {
        event.stopPropagation();
        event.preventDefault();
        let fontEvent = $(this).attr('data-event-type');

        if (fontEvent == "increase") {
            if (parseInt(fontSize) < 18 ) {
                fontSize = parseInt(fontSize) + 2;
                setCookie("fontSizeStatus", "increase");
            }
        } else if (fontEvent == "decrease") {
          console.log(fontSize);
            if (parseInt(fontSize) > 10) {
                fontSize = parseInt(fontSize) - 2;
            }
            setCookie("fontSizeStatus", "decrease");
        } else {
            fontSize = 14;
            setCookie("fontSizeStatus", "normal");
        }

        $(this).addClass('link-selected').parent().siblings().find('a').removeClass('link-selected')
        setCookie("fontSize", fontSize);
        $("body").css("font-size", fontSize + "px");
        $('.fontSizeEvent').trigger('fontSelected');
    })
});








// var affectedElements = $("body,h1,h2,h3,h4,h5,h6,p,li,input"); 

// affectedElements.each( function(){
//   var ele = $(this);
//   ele.data("orig-size", ele.css("font-size") );
//   // console.log(ele.data("orig-size"));
// });

// $(function ($) {
//   $.fn.fontResize = function (options) {
//     var increaseCount = 0;
//     var decreaseCount = 0;
//     var original_size = 0;
//     var self = this;

//     var changeFont = function (element, amount) {
//       var baseFontSize = parseInt(element.css("font-size"), 10);
//       var baseLineHeight = parseInt(element.css("line-height"), 10);
//       element.css("font-size", baseFontSize + amount + "px");
//       element.css("line-height", baseLineHeight + amount + "px");
//     };

//     options.increaseBtn.on("click", function (e) {
//       e.preventDefault();
//       if (increaseCount === 2) {
//         return;
//       }
//       self.each(function (index, element) {
//         changeFont($(element), 1);
//       });

//       $.cookie("increased-size",increaseCount);
//       $.cookie("decreased-size",decreaseCount);
//       increaseCount++;
//       decreaseCount--;
//     });

//     options.original_font.on("click", function (e) {
//       e.preventDefault();
//       affectedElements.each( function(){
//         var ele = $(this);
//         cookie_orig =  ele.css( "font-size" , ele.data("orig-size"));
//         $.cookie("font-size",cookie_orig);
//       });
      
//       $.cookie("increased-size",increaseCount);
//       $.cookie("decreased-size",decreaseCount);
//       // if(increaseCount == 2 && decreaseCount === (-2)){
//       //   self.each(function (index, element) {
//       //     changeFont($(element), 0);
//       //     changeFont($(element), 1);
//       //   });
//       //   original_size = 0;
//       // }
//     });

//     options.decreaseBtn.on("click", function (e) {
//       e.preventDefault();
//       if (decreaseCount === 2) {
//         return;
//       }
//       self.each(function (index, element) {
//         changeFont($(element), -1);
//       });
      
//       $.cookie("increased-size",increaseCount);
//       $.cookie("decreased-size",decreaseCount);

//       increaseCount--;
//       decreaseCount++;
//     });
//   };

  

// });(jQuery);


// $(function () {
//   var cookieValue = $.cookie("increased-size");
//   if(cookieValue == null )
//     {
       
//         $.cookie("increased-size",0);
//         $.cookie("decreased-size",0);
//     }
//    else 
//    {
//     $.cookie("increased-size",cookieValue);
//     $.cookie("decreased-size",cookieValue);
//    }

//   $("body,h1,h3,h4,h6,p,li,input").fontResize({
//   increaseBtn: $("#btn-increase"),
//   original_font: $("#btn-orig"),
//   decreaseBtn: $("#btn-decrease"),
// });




// });